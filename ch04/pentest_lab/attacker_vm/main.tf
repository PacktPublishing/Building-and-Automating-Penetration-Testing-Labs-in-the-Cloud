locals {
  subnet_02 = var.subnet_02
}

resource "google_compute_instance_from_machine_image" "kali_vm" {
  provider = google-beta
  name     = "vm-kali"
  machine_type = "e2-medium"
  zone         = "us-central1-c"

  source_machine_image = var.kali_machine_image

  metadata = {
    ssh-keys = "kali:${var.my_public_ssh_key}"
  }

  network_interface {
    subnetwork = local.subnet_02

    access_config {}
  }
}
